---
title: 日常的网络问题
date: 2020-06-23 10:00:00 +08:00
permalink: /blogs/10005
tags: [networking]
---


### 问题一：VPN 工作在哪一层？

A: VPN 客户端
B: VPN 服务端
C: 公网服务

A 通过 B 给 C 发送一个 http 请求，C 回复的内容怎样达到 A？

这篇博客 https://www.jingh.top/2017/01/15/vpn/ 较好的介绍了 VPN 处于第几层。

VPN 会接管系统所有的流量。对每个 IP 包进行处理，符合 VPN 规范的包，则进行解析，解析之后拿到一个真正的包，丢给操作系统；不符合 VPN 规范的包，直接丢给操作系统。

所以，回头阅读上述博客，可以发现 VPN 属于 IP 层（网络层），但 VPN 可以理解传输层甚至应用层。

### 问题二：路由器工作在哪一层？

假设把问题一中的 VPN 替换为路由器，这个流程又是怎样？
换成交换机呢？

交换机记录了 MAC 地址和交换机端口的映射。

这篇博客 https://blog.51cto.com/echo1937/1281746 说：
> 路由器转发数据包的时候不会修改源 IP 和目标 IP，只会改 MAC 地址。

需要确认一下：路由器到底会不会改 IP 包的源 IP。

问了一个对网络比较熟悉的同事，他说路由器会有 NAT 机制，会修改 IP 包中的源 IP 为网关 IP。
需要确认一下：网关 IP 是否就是自己的外网 IP？

根据这个回答
https://superuser.com/questions/105838/how-does-router-know-where-to-forward-packet
它的意思和同事说的是一样的，上面那篇博客可能有点问题。

### 问题三：桥接是个啥？

到底什么是桥接？ - 车小胖的回答 - 知乎 https://www.zhihu.com/question/263496943/answer/271892220

大概理解一下：桥接在二层处理（链路层，MAC 地址）。和桥接相关系的概念是路由，路由在三层处理（IP 层，IP 地址）。
